# ๐ข ูุธุงู ุงูุฅุฎุทุงุฑุงุช ุงูุฐููุฉ - ุฏููู ุงูุงุณุชุฎุฏุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงูุฅุฎุทุงุฑุงุช ุงูุฐููุฉ ูู TriPro ERP ูู ูุธุงู ูุชูุฏู ูุฑุงูุจ ุงูุนูููุงุช ุงูุชุฌุงุฑูุฉ ุชููุงุฆูุงู ููุตุฏุฑ ุชูุจููุงุช ุฐููุฉ ูููุณุชุฎุฏููู.

---

## ๐ฏ ุฃููุงุน ุงูุฅุฎุทุงุฑุงุช

### 1. **ุงูุฏูุนุงุช ุงููุณุชุญูุฉ** ๐ด (overdue_payment)
- **ุงูุบุฑุถ**: ุชูุจูู ุงูููุธููู ุจุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ
- **ุงูุฃููููุฉ**: ุนุงููุฉ (ุฅุฐุง ูุงูุช ูุชุฃุฎุฑุฉ ุฃูุซุฑ ูู 30 ููู)
- **ุงูุดุฑุท**: ุชุงุฑูุฎ ุงูุงุณุชุญูุงู < ุงูููู ุงูุญุงูู
- **ุงูุฅุฌุฑุงุก**: ูุชู ุฅุฑุณุงู ุฅุฎุทุงุฑ ููููุงู ูููุณุคูู ุนู ุงูุนููู

```typescript
// ูุซุงู ุนูู ุงูุฅุฎุทุงุฑ:
{
  title: "ุฏูุนุฉ ูุณุชุญูุฉ ููุฐ 45 ููู",
  message: "ุงููุงุชูุฑุฉ ุฑูู INV-001 ุงุณุชุญูุช ููุฐ 45 ููู",
  priority: "high",
  action_url: "/invoice/123"
}
```

### 2. **ุงููุฎุฒูู ุงูููุฎูุถ** ๐ก (low_inventory)
- **ุงูุบุฑุถ**: ุฅูุฐุงุฑ ูุฏุฑุงุก ุงููุฎุฒู ุจุงูุฃุตูุงู ุงููุงูุตุฉ
- **ุงูุฃููููุฉ**: ูุชูุณุทุฉ
- **ุงูุดุฑุท**: ุงููููุฉ ุงูุญุงููุฉ < ุงูุญุฏ ุงูุฃุฏูู ุงููุทููุจ
- **ุงูุชูุฑุงุฑ**: ูููู

```typescript
{
  title: "ูุฎุฒูู ููุฎูุถ: ุงููููู 2 ุทู",
  message: "ุงููุฎุฒูู ุงูุญุงูู: 2 ูุงูุญุฏ ุงูุฃุฏูู: 5",
  priority: "medium",
  action_url: "/inventory/456"
}
```

### 3. **ุงูุฏููู ุงูุนุงููุฉ** ๐ด (high_debt)
- **ุงูุบุฑุถ**: ุชูุจูู ุจุชุฌุงูุฒ ุญุฏ ุงูุงุฆุชูุงู
- **ุงูุฃููููุฉ**: ุนุงููุฉ ุฌุฏุงู
- **ุงูุดุฑุท**: ุฅุฌูุงูู ุฏููู ุงูุนููู > ุญุฏ ุงูุงุฆุชูุงู ุงููุณููุญ
- **ุงูุฅุฌุฑุงุก**: ููุฑู + ูููู

```typescript
{
  title: "ุชุฌุงูุฒ ุญุฏ ุงูุงุฆุชูุงู: ุดุฑูุฉ ุงููุงุฏู",
  message: "ุงูุฏูู ูุชุฌุงูุฒ ุงูุญุฏ ุจูุณุจุฉ 125%",
  priority: "high",
  action_url: "/customer/789"
}
```

### 4. **ุงูุชุธุงุฑ ุงูููุงููุฉ** ๐ต (pending_approval)
- **ุงูุบุฑุถ**: ุชูุจูู ุงูููุงูููู ุจุงููุณุชูุฏุงุช ุงููุนููุฉ
- **ุงูุฃููููุฉ**: ุนุงููุฉ
- **ุงูุดุฑุท**: ูุฌูุฏ ููุงุชูุฑ/ุฃูุงูุฑ ูู ุญุงูุฉ "ูุนููุฉ ุงูููุงููุฉ"
- **ุงูุฃููุงุน ุงููุฏุนููุฉ**:
  - ููุงุชูุฑ ุงููุจูุนุงุช
  - ููุงุชูุฑ ุงููุดุชุฑูุงุช
  - ุฃูุงูุฑ ุงูุดุฑุงุก
  - ุฅุดุนุงุฑุงุช ุงูุฏูุน

```typescript
{
  title: "ุงููุงุชูุฑุฉ INV-050 ุชูุชุธุฑ ุงูููุงููุฉ",
  message: "ูุฑุฌู ูุฑุงุฌุนุฉ ูุงุนุชูุงุฏ ุงููุงุชูุฑุฉ",
  priority: "high",
  action_url: "/invoice/050/approve"
}
```

### 5. **ุชูุงุฑูุฎ ุงุณุชุญูุงู ูุฑูุจุฉ** โ๏ธ (due_date_approaching)
- **ุงูุบุฑุถ**: ุชุญุฐูุฑ ูุณุจู ูุจู ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
- **ุงูุฃููููุฉ**: ูุชูุณุทุฉ
- **ุงูุดุฑุท**: ุชุงุฑูุฎ ุงูุงุณุชุญูุงู ุจูู ุบุฏ ู7 ุฃูุงู
- **ุงูุชูุฑุงุฑ**: ูููู

```typescript
{
  title: "ุชุงุฑูุฎ ุฏูุน ูุฑูุจ: INV-030",
  message: "ุณุชุณุชุญู ุงููุงุชูุฑุฉ ุจุนุฏ 3 ุฃูุงู",
  priority: "medium",
  action_url: "/invoice/030"
}
```

---

## โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุฅุฎุทุงุฑุงุช

### ุชูุถููุงุช ุงููุณุชุฎุฏู

ูููู ููู ูุณุชุฎุฏู ุชุฎุตูุต ุชูุถููุงุช ุงูุฅุฎุทุงุฑุงุช ุงูุฎุงุตุฉ ุจู:

```typescript
interface NotificationPreferences {
  // ุชูุนูู/ุชุนุทูู ุฃููุงุน ุงูุฅุฎุทุงุฑุงุช
  enable_overdue_payments: boolean;
  enable_low_inventory: boolean;
  enable_high_debt: boolean;
  enable_pending_approval: boolean;
  enable_due_date_alerts: boolean;

  // ุทุฑู ุงูุฅุฑุณุงู
  email_notifications: boolean;
  sms_notifications: boolean;
  push_notifications: boolean;

  // ุญุฏูุฏ ุงูุชูุจููุงุช
  overdue_payment_threshold_days: number; // ุงูุญุฏ ุงูุฃุฏูู ูุฃูุงู ุงูุชุฃุฎุฑ
  low_inventory_threshold_percent: number; // ูุณุจุฉ ุงูุงูุฎูุงุถ (%)
  high_debt_threshold_percent: number; // ูุณุจุฉ ุชุฌุงูุฒ ุงูุญุฏ (%)
}
```

### ุงููุตูู ุฅูู ุงูุฅุนุฏุงุฏุงุช

- **ุงููุณุงุฑ**: `/settings` ุซู ุชุจููุจ "ุงูุฅุฎุทุงุฑุงุช"
- **ุงูุชุฃุซูุฑ**: ูุชู ุชุทุจูู ุงูุฅุนุฏุงุฏุงุช ููุฑุงู

---

## ๐ ูุงุฌูุฉ ูุฑูุฒ ุงูุฅุฎุทุงุฑุงุช

### ูุชุญ ูุฑูุฒ ุงูุฅุฎุทุงุฑุงุช

1. ุงููุฑ ุนูู **ุฌุฑุณ ุงูุฅุฎุทุงุฑุงุช** ๐ ูู ุงูุฒุงููุฉ ุงูุนูููุฉ ูู ุงูุดุงุดุฉ
2. ุณูุธูุฑ **NotificationCenter** ุจูุงูุฐุฉ ุฌุงูุจูุฉ

### ููุฒุงุช ูุฑูุฒ ุงูุฅุฎุทุงุฑุงุช

โ **ุนุฑุถ ุงูุฅุฎุทุงุฑุงุช**
- ุนุฑุถ ุขุฎุฑ 50 ุฅุฎุทุงุฑ
- ุชุฑุชูุจ ุญุณุจ ุงูุฃููููุฉ ูุงูุชุงุฑูุฎ
- ุชูููุญ ุจุนุฏุฏ ุงูุฅุฎุทุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ

โ **ุงูุชุตููุฉ**
- ุชุตููุฉ ุญุณุจ ุงูููุน (ูุณุชุญูุงุชุ ูุฎุฒููุ ููุงููุงุชุ ุฅูุฎ)
- ุนุฑุถ ุงููู ุฃู ููุน ูุญุฏุฏ

โ **ุงูุฅุฌุฑุงุกุงุช**
- ุชุนููู ูุงุญุฏ ูููุฑูุก (ุจุงูุถุบุท ุนูู ุงูุฅุฎุทุงุฑ)
- ุชุนููู ุงููู ูููุฑูุก (ุฒุฑ ูู ุงูุฃุนูู)
- ุญุฐู ุงูุฅุฎุทุงุฑ (ุฒุฑ X)
- ุงูุฐูุงุจ ูููุณุชูุฏ ุงููุชุนูู (ุฒุฑ "ุนุฑุถ")

โ **ุงูุชุฑููุฒ ุงููููู**
```
๐ด ุฃููููุฉ ุนุงููุฉ (high) - ุฎูููุฉ ุญูุฑุงุก ูุงุชุญุฉ
๐ก ุฃููููุฉ ูุชูุณุทุฉ (medium) - ุฎูููุฉ ุตูุฑุงุก ูุงุชุญุฉ
๐ต ุฃููููุฉ ููุฎูุถุฉ (low) - ุฎูููุฉ ุฒุฑูุงุก ูุงุชุญุฉ
```

---

## ๐ ุฌุฏูู ุงููุญูุตุงุช ุงูุฏูุฑูุฉ

### ุขููุฉ ุงูุนูู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุชุดุบูู ุงูุชุทุจูู                      โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุจุฏุก ุฌุฏูู ุงูุฅุฎุทุงุฑุงุช                   โ
โ (NotificationScheduler)              โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงููุญุต ุงูุฃูู (ููุฑุงู)                  โ
โ - ูุญุต ุงูุฏูุนุงุช ุงููุณุชุญูุฉ              โ
โ - ูุญุต ุงููุฎุฒูู ุงูููุฎูุถ               โ
โ - ูุญุต ุงูุฏููู ุงูุนุงููุฉ                โ
โ - ูุญุต ุงููุณุชูุฏุงุช ุงููุนููุฉ             โ
โ - ูุญุต ุงูุชูุงุฑูุฎ ุงููุฑูุจุฉ               โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุชุธุงุฑ 30 ุฏูููุฉ                      โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
       (ูุชูุฑุฑ ุงููุญุต)
```

### ุงููุชุฑุฉ ุงูุฒูููุฉ

- **ุงููุชุฑุฉ ุงูุงูุชุฑุงุถูุฉ**: 30 ุฏูููุฉ
- **ูููู ุงูุชุฎุตูุต**: ูู ููู `App.tsx`

```typescript
NotificationScheduler.start({
    intervalMinutes: 60, // ุชุบููุฑ ุงููุชุฑุฉ
    autoStart: true
});
```

---

## ๐ป ุงูุงุณุชุฎุฏุงู ุงูุจุฑูุฌู

### 1. ุฅูุดุงุก ุฅุฎุทุงุฑ ูุฏูู

```typescript
import NotificationService from './services/notificationService';

await NotificationService.createNotification(
  userId,
  'ุนููุงู ุงูุฅุฎุทุงุฑ',
  'ูุต ุงูุฅุฎุทุงุฑ',
  'success',
  'high',
  relatedId,
  '/path/to/document'
);
```

### 2. ุงุณุชุฎุฏุงู Hook ููุฅุฎุทุงุฑุงุช

```typescript
import { useNotifications } from '../utils/useNotifications';

function MyComponent() {
  const {
    notifications,
    unreadCount,
    markAsRead,
    markAllAsRead,
    deleteNotification,
    refreshNotifications
  } = useNotifications();

  return (
    <div>
      <h1>ุงูุฅุฎุทุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ: {unreadCount}</h1>
      {notifications.map(notif => (
        <div key={notif.id}>
          {notif.title}
          <button onClick={() => markAsRead(notif.id)}>ููุฑูุก</button>
        </div>
      ))}
    </div>
  );
}
```

### 3. ุชุดุบูู ุงููุญูุตุงุช ูุฏูููุง

```typescript
import NotificationScheduler from './services/NotificationScheduler';

// ุชุดุบูู ุงููุญูุตุงุช ููุฑุงู (ุจุฏูู ุงูุชุธุงุฑ 30 ุฏูููุฉ)
await NotificationScheduler.triggerNow();

// ุงูุญุตูู ุนูู ุญุงูุฉ ุงูุฌุฏูู
const status = NotificationScheduler.getStatus();
console.log(status.isRunning); // true/false
```

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏุงูู ุงูุฅุฎุทุงุฑุงุช

#### 1. ุฌุฏูู `notifications`
```sql
CREATE TABLE notifications (
  id UUID PRIMARY KEY,
  user_id UUID -- ุงููุณุชุฎุฏู ุงููุณุชูุจู
  title VARCHAR(255) -- ุงูุนููุงู
  message TEXT -- ุงููุญุชูู
  type VARCHAR(50) -- ููุน ุงูุฅุฎุทุงุฑ
  priority VARCHAR(20) -- ุงูุฃููููุฉ
  is_read BOOLEAN -- ูู ุชู ูุฑุงุกุชูุ
  action_url VARCHAR(500) -- ุฑุงุจุท ุงูุฅุฌุฑุงุก
  related_id VARCHAR(100) -- ูุนุฑูู ุงููุณุชูุฏ ุงููุฑุชุจุท
  created_at TIMESTAMP -- ููุช ุงูุฅูุดุงุก
  expires_at TIMESTAMP -- ุงูุชูุงุก ุงูุตูุงุญูุฉ (ุงุฎุชูุงุฑู)
);
```

#### 2. ุฌุฏูู `notification_preferences`
```sql
CREATE TABLE notification_preferences (
  id UUID PRIMARY KEY,
  user_id UUID UNIQUE
  enable_overdue_payments BOOLEAN
  enable_low_inventory BOOLEAN
  enable_high_debt BOOLEAN
  enable_pending_approval BOOLEAN
  enable_due_date_alerts BOOLEAN
  email_notifications BOOLEAN
  sms_notifications BOOLEAN
  push_notifications BOOLEAN
);
```

### ุชูุธูู ุงูุฅุฎุทุงุฑุงุช

ุงูุฅุฎุทุงุฑุงุช ุงูุชู ุงูุชูุช ุตูุงุญูุชูุง ูุชู ุญุฐููุง ุชููุงุฆูุงู:
```sql
-- ุงูุญุฐู ูุชู ูู ููู ุนูุฏ ููุชุตู ุงูููู (ูููู ุฌุฏููุชู)
SELECT cleanup_expired_notifications();
```

---

## ๐ ุงูุชุซุจูุช ูุงูุชูุนูู

### ุงูุฎุทูุงุช

1. **ูุณุฎ ุงููููุงุช**
   ```
   โ services/notificationService.ts
   โ services/NotificationScheduler.ts
   โ services/setup_notifications.sql
   โ components/NotificationCenter.tsx
   โ utils/useNotifications.ts
   ```

2. **ุชุดุบูู ุงูุณูุฑูุจุช ูู Supabase**
   ```sql
   -- ููุฐ ูุญุชูู setup_notifications.sql ูุงููุงู
   ```

3. **ุชุญุฏูุซ App.tsx**
   - ุชู ุจุงููุนู โ

4. **ุชุญุฏูุซ Header.tsx**
   - ุชู ุจุงููุนู โ

5. **ุงุฎุชุจุงุฑ**
   - ุงูุชุญ ุงููุชุตูุญ
   - ุงููุฑ ุนูู ุฌุฑุณ ุงูุฅุฎุทุงุฑุงุช
   - ูุฌุจ ุฃู ุชุธูุฑ ุงููุงูุฐุฉ ุงูุฌุงูุจูุฉ

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [ ] ุชุซุจูุช ุฌููุน ุงููููุงุช ุงูุฌุฏูุฏุฉ
- [ ] ุชุดุบูู `setup_notifications.sql` ูู Supabase
- [ ] ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู ุงูุจูุงุก
- [ ] ุงุฎุชุจุงุฑ ูุชุญ ูุฑูุฒ ุงูุฅุฎุทุงุฑุงุช
- [ ] ุฅุถุงูุฉ ุฅุฎุทุงุฑ ุชุฌุฑูุจู ูุฏูููุง
- [ ] ุงุฎุชุจุงุฑ ุงููุญูุตุงุช ุงูุฏูุฑูุฉ (ุงูุชุธุฑ 30 ุฏูููุฉ)
- [ ] ุงูุชุญูู ูู ุชุนููู ุงูุฅุฎุทุงุฑ ูููุฑูุก
- [ ] ุงุฎุชุจุงุฑ ุงูุญุฐู

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุงูุฅุฎุทุงุฑุงุช
**ุงูุญู**:
1. ุชุญูู ูู ุฃู ุฌุฏูู `notifications` ููุฌูุฏ
2. ุงุฎุชุจุฑ `NotificationScheduler.triggerNow()` ูู Console
3. ุชุญูู ูู ุณุฌูุงุช Supabase

### ุงููุดููุฉ: ุงูุฅุฎุทุงุฑุงุช ุชุธูุฑ ููุฑุฑุฉ
**ุงูุญู**:
1. ุชุญูู ูู ุนุฏู ุชุดุบูู NotificationScheduler ูุฑุชูู
2. ุงุฎุชุจุฑ ุญุฐู ุงูุฅุฎุทุงุฑุงุช ุงููุฏููุฉ

### ุงููุดููุฉ: ุงูุฃุฏุงุก ุจุทูุก
**ุงูุญู**:
1. ุฒุฏ ูุชุฑุฉ ุงููุญูุตุงุช ุงูุฏูุฑูุฉ ุฅูู 60 ุฏูููุฉ
2. ุชุญูู ูู ูุฌูุฏ ููุงุฑุณ ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

```typescript
// ุงูุญุตูู ุนูู ุนุฏุฏ ุงูุฅุฎุทุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
const count = await NotificationService.getUnreadCount(userId);

// ุงูุญุตูู ุนูู ุฌููุน ุงูุฅุฎุทุงุฑุงุช
const all = await NotificationService.getAllNotifications(userId);

// ุงูุญุตูู ุนูู ุงูุฅุฎุทุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ ููุท
const unread = await NotificationService.getUnreadNotifications(userId);
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ูู ุงููุฑุญูุฉ ุงููุงุฏูุฉ
- [ ] ุฅุถุงูุฉ ุฅุฎุทุงุฑุงุช ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- [ ] ุฅุถุงูุฉ ุฅุฎุทุงุฑุงุช ุนุจุฑ SMS
- [ ] ุฅุถุงูุฉ ุชูุจููุงุช ุงูููุจ (Web Push)
- [ ] ุชูุงุฑูุฑ ุงูุฅุฎุทุงุฑุงุช
- [ ] ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฌุงุจุฉ

---

## ๐ ุงูุฏุนู

ููุฅุจูุงุบ ุนู ุฃุฎุทุงุก ุฃู ุงูุชุฑุงุญ ููุฒุงุชุ ูุฑุฌู ุงูุชูุงุตู ุนุจุฑ WhatsApp:
๐ฑ +20 100 8495405

---

**ุขุฎุฑ ุชุญุฏูุซ**: 26 ููุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ**: 1.0
**ุงูุญุงูุฉ**: โ ูุดุท ููุนุงู
